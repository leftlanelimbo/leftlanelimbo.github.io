<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>perspective_tilt</title>
    <style>
        body{
            background-color: black;
            /* margin: 0; */
            /* overflow: hidden; */
        }
        #xval {
        position: absolute;
        top: 10px;
        /* width: 100vw; */
        /* height: 100vh; */
        text-align: left;
        z-index: 150;
        display:block;
        color:white;
        }
        #yval {
        position: absolute;
        top: 30px;
        /* width: 100vw; */
        /* height: 80vh; */
        text-align: left;
        z-index: 150;
        display:block;
        color: white;
        }
        #zval {
        position: absolute;
        top: 50px;
        /* width: 100vw; */
        /* height: 80vh; */
        text-align: left;
        z-index: 150;
        display:block;
        color: white;
        }
        #alpha {
        position: absolute;
        top: 70px;
        /* width: 100vw; */
        /* height: 80vh; */
        text-align: left;
        z-index: 150;
        display:block;
        color: white;
        }
        #beta {
        position: absolute;
        top: 90px;
        /* width: 100vw; */
        /* height: 80vh; */
        text-align: left;
        z-index: 150;
        display:block;
        color: white;
        }
        #gamma {
        position: absolute;
        top: 110px;
        /* width: 100vw; */
        /* height: 80vh; */
        text-align: left;
        z-index: 150;
        display:block;
        color: white;
        }

        #Oalpha {
        position: absolute;
        top: 150px;
        /* width: 100vw; */
        /* height: 80vh; */
        text-align: left;
        z-index: 150;
        display:block;
        color: white;
        }
        #Obeta {
        position: absolute;
        top: 170px;
        /* width: 100vw; */
        /* height: 80vh; */
        text-align: left;
        z-index: 150;
        display:block;
        color: white;
        }
        #Ogamma {
        position: absolute;
        top: 190px;
        /* width: 100vw; */
        /* height: 80vh; */
        text-align: left;
        z-index: 150;
        display:block;
        color: white;
        }
        
        #enter{
        z-index:200;
        }

    </style>
</head>
<body>
    <p id='xval'>xval</p>
    <p id='yval'>yval</p>
    <p id='zval'>zval</p>

    <p id='alpha'>alpha</p>
    <p id='beta'>beta</p>
    <p id='gamma'>gamma</p>

    <p id='Oalpha'>oalpha</p>
    <p id='Obeta'>obeta</p>
    <p id='Ogamma'>ogamma</p>



    <button id=enter>Click me</button>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.0.4/gsap.min.js"></script>

    <script>

        function handleMotionEvent(event) {
                    // x = Math.abs(event.accelerationIncludingGravity.x * 0.1);
                t = event.acceleration
                x = event.accelerationIncludingGravity.x; //* 0.1;
                y = event.accelerationIncludingGravity.y; //* 0.1;
                z = event.accelerationIncludingGravity.z; //* 0.1;

                a = event.rotationRate.alpha; //* 0.1;
                b = event.rotationRate.beta; //* 0.1;
                g = event.rotationRate.gamma; //* 0.1;


                console.log(t);
                //     y = Math.abs(event.accelerationIncludingGravity.y * .05 +.2);
                xval.innerText = `motion event acceleration xval ${x}`;
                yval.innerText = `motion event acceleration yval ${y}`;
                zval.innerText = `motion event acceleration zval ${z}`;

                alpha.innerText = `motion event rotationRate alpha ${a}`;
                beta.innerText = `motion event rotationRate beta ${b}`;
                gamma.innerText = `motion event rotationRate gamma ${g}`;

        }

        function handleOrientationEvent(event) {
            oA = event.alpha; //* 0.1;
            oB = event.beta; //* 0.1;
            oG = event.gamma; //* 0.1;


            
            //     y = Math.abs(event.accelerationIncludingGravity.y * .05 +.2);
            Oalpha.innerText = `orientation event alpha ${oA}`;
            Obeta.innerText = `orientation event beta ${oB}`;
            Ogamma.innerText = `orientation event gamma ${oG}`;

        }


        //https://developer.mozilla.org/en-US/docs/Web/API/DeviceMotionEvent
        function onClickDeviceMotion() {
                // feature detect
                if (typeof DeviceMotionEvent.requestPermission === 'function') {
                    DeviceMotionEvent.requestPermission()
                        .then(permissionState => {
                            if (permissionState === 'granted') {
                                window.addEventListener('devicemotion', handleMotionEvent, true);

                            }
                        })
                        .catch(console.error);
                } else {
                    // handle regular non iOS 13+ devices
                    window.addEventListener('devicemotion', handleMotionEvent, true);
                    console.log(console.error);
                }
            }

        function onClickDeviceOrientation() {
            // feature detect
            if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                DeviceOrientationEvent.requestPermission()
                    .then(permissionState => {
                        if (permissionState === 'granted') {
                            window.addEventListener('deviceorientation', handleOrientationEvent, true);

                        }
                    })
                    .catch(console.error);
            } else {
                // handle regular non iOS 13+ devices
                window.addEventListener('deviceorientation', handleOrientationEvent, true);
                console.log(console.error);
            }
        }

        
        document.getElementById('enter').addEventListener("click",onClickDeviceMotion);
        document.getElementById('enter').addEventListener("click",onClickDeviceOrientation);

        
    </script>    
</body>
</html>
